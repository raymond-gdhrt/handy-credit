<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui" xmlns:po="http://primefaces.org/freya" 

                template="/pages/freyatemplate/template.xhtml">

    <ui:define name="title">Dashboard</ui:define>

    <ui:define name="head">
        <h:outputScript name="chartjs/chart.js" library="demo" />
        <script>
            //<![CDATA[
            $(function () {
                var myChart1 = null;

                window.redrawChart = function () {
                    var style = getComputedStyle(document.body);
                    var primCol1 = style.getPropertyValue('--primaryColor1') || 'rgba(255, 99, 132, 1)';
                    var primLighterCol1 = style.getPropertyValue('--primaryLighterColor1') || 'rgba(255, 99, 132, 0.2)';
                    var primCol2 = style.getPropertyValue('--primaryColor2') || 'rgba(54, 162, 235, 1)';
                    var primLighterCol2 = style.getPropertyValue('--primaryLighterColor2') || 'rgba(54, 162, 235, 0.2)';
                    var primCol3 = style.getPropertyValue('--primaryColor3') || 'rgba(255, 206, 86, 1)';
                    var primLighterCol3 = style.getPropertyValue('--primaryLighterColor3') || 'rgba(255, 206, 86, 0.2)';
                    var primCol4 = style.getPropertyValue('--primaryColor4') || 'rgba(75, 192, 192, 1)';
                    var primLighterCol4 = style.getPropertyValue('--primaryLighterColor4') || 'rgba(75, 192, 192, 0.2)';
                    var primCol5 = style.getPropertyValue('--primaryColor5') || 'rgba(153, 102, 255, 1)';
                    var primLighterCol5 = style.getPropertyValue('--primaryLighterColor5') || 'rgba(153, 102, 255, 0.2)';

                    myChart1 = new Chart(document.getElementById("chart1").getContext('2d'), {
                        type: 'line',
                        data: {
                            labels: #{dashboard.chartData.composeLableString()},
                            datasets: [{
                                    label: 'Capacity',
                                    data: #{dashboard.chartData.composeFloatData1String()},
                                    order: 1,
                                    borderColor: [
                                        primCol1,
                                    ],
                                    borderWidth: 4,
                                    fill: true,
                                    backgroundColor: [
                                        primLighterCol1
                                    ],

                                },
                                {
                                    label: 'Character',
                                    data: #{dashboard.chartData.composeFloatData2String()},
                                    order: 2,
                                    borderColor: [
                                        primCol2,
                                    ],
                                    borderWidth: 4,
                                    fill: true,
                                    backgroundColor: [
                                        primLighterCol2
                                    ],

                                },
                                {
                                    label: 'Capital',
                                    data: #{dashboard.chartData.composeFloatData3String()},
                                    order: 2,
                                    borderColor: [
                                        primCol3,
                                    ],
                                    borderWidth: 4,
                                    fill: true,
                                    backgroundColor: [
                                        primLighterCol3
                                    ],

                                },
                                {
                                    label: 'Conditions',
                                    data: #{dashboard.chartData.composeFloatData4String()},
                                    order: 2,
                                    borderColor: [
                                        primCol4,
                                    ],
                                    borderWidth: 4,
                                    fill: true,
                                    backgroundColor: [
                                        primLighterCol4
                                    ],

                                },
                                {
                                    label: 'Collateral',
                                    data: #{dashboard.chartData.composeFloatData5String()},
                                    order: 2,
                                    borderColor: [
                                        primCol5,
                                    ],
                                    borderWidth: 4,
                                    fill: true,
                                    backgroundColor: [
                                        primLighterCol5
                                    ],

                                }
                            ]
                        },
                        options: {
                            legend: {
                                display: false,
                            },
                            maintainAspectRatio: false,
                            hover: {
                                mode: 'index'
                            },
                            scales: {
                                xAxes: [{
                                        display: true,
                                        gridLines: {
                                            color: 'transparent',
                                        },
                                        ticks: {
                                            fontColor: '#BFC2C6'
                                        }
                                    }],
                                yAxes: [{
                                        display: true,
                                        gridLines: {
                                            color: 'rgba(191, 194, 198, .45)',
                                            borderDash: [5, 10],
                                        },
                                        ticks: {
                                            fontColor: '#BFC2C6',
                                            min: 0,
                                            stepSize: 5,
                                        }
                                    }]
                            }
                        }
                    });
                }

                window.redrawChart();

                var ctx2 = document.getElementById("chart2").getContext('2d');

                var myChart2 = new Chart(ctx2, {
                    type: 'line',
                    data: {
                        labels: ['8Sun', '9Mon', '10Thu', '11Wed', '12Fri', '13Sat', '14Sun'],
                        datasets: [{
                                label: 'Revenue',
                                data: [12, 19, 3, 5, 2, 3, 9],
                                borderColor: [
                                    '#FFA928',
                                ],
                                borderWidth: 4,
                                fill: true,
                                backgroundColor: [
                                    'rgba(255, 169, 40, .2)'
                                ],
                            }
                        ]
                    },
                    options: {
                        legend: {
                            display: false,
                        },
                        maintainAspectRatio: false,
                        hover: {
                            mode: 'index'
                        },
                        scales: {
                            xAxes: [{
                                    display: false,
                                }],
                            yAxes: [{
                                    display: false,
                                }]
                        }
                    }
                });
            });
            //]]>  
        </script>
    </ui:define>


    <ui:define id="dashboard" name="content">
        <div  class="layout-dashboard">
            <p:outputPanel  rendered="#{componentRenderer.businessOwner and not componentRenderer.administrator}" styleClass="p-grid">
                <div class="p-col-12">
                    <div class="notification">
                        <h6>Hello! Welcome to CRAMS! Before start please complete your profile to know you better. <a href="#{request.contextPath}/pages/businesses/BusinessProfileView.xhtml">Profile settings <i class="pi pi-arrow-up"></i></a></h6>
                    </div>
                </div>

                <div class="p-col-12 p-md-12 p-xl-12">
                    <div class="p-grid">
                        <div class="p-col-12">
                            <div class="card chart">
                                <div class="card-header">
                                    <div class="card-title">
                                        <h6>Credit profile behavior</h6>
                                        <p class="subtitle">Line graph</p>
                                    </div>
                                </div>
                                <canvas id="chart1" style="height: 250px;"></canvas>
                            </div>
                        </div>

                    </div>
                </div>
                <div class="p-col-12 p-xl-4">
                    <div class="p-grid">

                        <div class="p-col-12 p-md-6 p-xl-12">
                            <div class="card stocks">
                                <div class="card-header">
                                    <div class="card-title">
                                        <h6>Credit profile (Average)</h6>
                                        <p class="subtitle">Real time</p>
                                    </div>
                                    <p:commandButton type="button" icon="pi pi-plus" styleClass="secondary-button text-button rounded-button" />
                                </div>
                                <ul>
                                    <li class="down">
                                        <div class="stock-name">
                                            <h6>CAPITAL</h6>
                                        </div>
                                        <p:graphicImage name="images/dashboard/mini-graph-1.svg" library="demo" />
                                        <div class="stock-price">
                                            <i class="pi pi-arrow-down"></i>
                                            <h6>#{dashboard.businessCreditProfile.capitalScore}</h6>
                                        </div>

                                    </li>
                                    <li>
                                        <div class="stock-name">
                                            <h6>CHARACTER</h6>
                                        </div>
                                        <p:graphicImage name="images/dashboard/mini-graph-2.svg" library="demo" />
                                        <div class="stock-price">
                                            <i class="pi pi-arrow-down"></i>
                                            <h6>#{dashboard.businessCreditProfile.characterScore}</h6>
                                        </div>

                                    </li>
                                    <li>
                                        <div class="stock-name">
                                            <h6>CAPACITY</h6>
                                        </div>
                                        <p:graphicImage name="images/dashboard/mini-graph-3.svg" library="demo" />
                                        <div class="stock-price">
                                            <i class="pi pi-arrow-down"></i>
                                            <h6>#{dashboard.businessCreditProfile.capacityScore}</h6>
                                        </div>

                                    </li>
                                    <li>
                                        <div class="stock-name">
                                            <h6>CONDITIONS</h6>
                                        </div>
                                        <p:graphicImage name="images/dashboard/mini-graph-4.svg" library="demo" />
                                        <div class="stock-price">
                                            <i class="pi pi-arrow-down"></i>
                                            <h6>#{dashboard.businessCreditProfile.conditionsScore}</h6>
                                        </div>

                                    </li>
                                    <li class="same">
                                        <div class="stock-name">
                                            <h6>COLLATERAL</h6>
                                        </div>
                                        <p:graphicImage name="images/dashboard/mini-graph-5.svg" library="demo" />
                                        <div class="stock-price">
                                            <i class="pi pi-minus"></i>
                                            <h6>#{dashboard.businessCreditProfile.collateralScore}</h6>                                  </div>

                                    </li>
                                </ul>

                            </div>
                        </div>
                    </div>

                </div>
                <p:outputPanel  rendered="true"  styleClass="p-col-12 p-md-8">
                    <div class="card schedule">
                        <div class="card-header">
                            <div class="card-title">
                                <h6>Credit profile interpretations</h6>
                                <p class="subtitle">(All scores are given in percentages)</p>
                            </div>

                        </div>

                        <ul>
                            <li>
                                <div class="schedule-header">
                                    <h6>Capacity score</h6>

                                </div>

                                <p style="opacity: 0.7">
                                    <h:outputText value="
                                                  This represents a businesses&apos; ability to repay the loans. 
                                                  Its calculated from the revenue, expenses, cash flow and repayment timing."
                                                  escape="false"
                                                  /> 
                                </p>
                            </li>
                            <li>
                                <div class="schedule-header">
                                    <h6>Capital score</h6>

                                </div>

                                <p style="opacity: 0.7">
                                    <h:outputText value="The cash you put toward starting your business is called capital, and it&apos;s a 
                                                  good way to shows how serious a business is about its success. 
                                                  It&apos;s gotten from how much a business is trying to contribute towards the cause of the loan needed and the type of reason for loan application. 
                                                  This may come from deposits or money from other sources."
                                                  escape="false"
                                                  />
                                </p>
                            </li>

                            <li>
                                <div class="schedule-header">
                                    <h6>Collateral score</h6>

                                </div>

                                <p style="opacity: 0.7">
                                    <h:outputText value="Collateral is secondary source of repayment for the loan. This could be equipment, vehicles or 
                                                  inventory. The collatearl score will be based 
                                                  on a percentage of the collateral&apos;s value, which is called the loan-to-value ratio (LTV)."
                                                  escape="false"
                                                  />
                                </p>
                            </li>

                            <li>
                                <div class="schedule-header">
                                    <h6>Conditions</h6>

                                </div>

                                <p style="opacity: 0.7">
                                    <h:outputText value="This represents the legitmacy and competitiveness of the business, the type of industry, online presencs, 
                                                  profitability of the business as per current economical and political environment, and duration of existance of the business."
                                                  escape="false"
                                                  />
                                </p>
                            </li>

                            <li>
                                <div class="schedule-header">
                                    <h6>Character score</h6>

                                </div>

                                <p style="opacity: 0.7">
                                    <h:outputText value="This represents a business&apos; credit history which may be required to personally 
                                                  guarantee the loan. Statistics show that the way a person managed previous credit generally 
                                                  indicates how he or she will manage the curret business credit. Any references or other background 
                                                  information you can provide will be considered. "
                                                  escape="false"
                                                  />
                                </p>
                            </li>

                        </ul>

                    </div>
                </p:outputPanel>

            </p:outputPanel>



            <p:outputPanel  rendered="#{componentRenderer.administrator}" styleClass="p-grid">

                <div class="p-col-3">
                    <div class="card overview-box white">
                        <div class="overview-info">
                            <h6>Total businesses</h6>
                            <h1>
                                <h:outputText value="#{dashboard.totalBusinesses}">
                                    <f:convertNumber groupingUsed="true"
                                                     maxFractionDigits="2"  />
                                </h:outputText>
                            </h1>
                        </div>
                        <i class="pi pi-image"></i>
                    </div>
                </div>

                <div class="p-col-3">
                    <div class="card overview-box gray">
                        <div class="overview-info">
                            <h6>Total loan providers</h6>
                            <h1>#{dashboard.totalLoanProviders}</h1>
                        </div>
                        <i class="pi pi-globe"></i>
                    </div>
                </div>
                <div class="p-col-3">
                    <div class="card overview-box darkgray">
                        <div class="overview-info">
                            <h6>Total loans</h6>
                            <h1>#{dashboard.totalLoans}</h1>
                        </div>
                        <i class="pi pi-th-large"></i>
                    </div>
                </div>
                <div class="p-col-3">
                    <div class="card overview-box orange">
                        <div class="overview-info">
                            <h6>Loan applications</h6>
                            <h1>#{dashboard.totalLoanApplications}</h1>
                        </div>
                        <i class="pi pi-cloud"></i>
                    </div>
                </div>
                <p:outputPanel  rendered="true"  styleClass="p-col-12 p-md-8">
                    <div class="card schedule">
                        <div class="card-header">
                            <div class="card-title">
                                <h6>Credit profile interpretations</h6>
                                <p class="subtitle">(All scores are given in percentages)</p>
                            </div>

                        </div>

                        <ul>
                            <li>
                                <div class="schedule-header">
                                    <h6>Capacity score</h6>

                                </div>

                                <p style="opacity: 0.7">
                                    <h:outputText value="
                                                  This represents a businesses&apos; ability to repay the loans. 
                                                  Its calculated from the revenue, expenses, cash flow and repayment timing."
                                                  escape="false"
                                                  /> 
                                </p>
                            </li>
                            <li>
                                <div class="schedule-header">
                                    <h6>Capital score</h6>

                                </div>

                                <p style="opacity: 0.7">
                                    <h:outputText value="The cash you put toward starting your business is called capital, and it&apos;s a 
                                                  good way to shows how serious a business is about its success. 
                                                  It&apos;s gotten from how much a business is trying to contribute towards the cause of the loan needed and the type of reason for loan application. 
                                                  This may come from deposits or money from other sources."
                                                  escape="false"
                                                  />
                                </p>
                            </li>

                            <li>
                                <div class="schedule-header">
                                    <h6>Collateral score</h6>

                                </div>

                                <p style="opacity: 0.7">
                                    <h:outputText value="Collateral is secondary source of repayment for the loan. This could be equipment, vehicles or 
                                                  inventory. The collatearl score will be based 
                                                  on a percentage of the collateral&apos;s value, which is called the loan-to-value ratio (LTV)."
                                                  escape="false"
                                                  />
                                </p>
                            </li>

                            <li>
                                <div class="schedule-header">
                                    <h6>Conditions</h6>

                                </div>

                                <p style="opacity: 0.7">
                                    <h:outputText value="This represents the legitmacy and competitiveness of the business, the type of industry, online presencs, 
                                                  profitability of the business as per current economical and political environment, and duration of existance of the business."
                                                  escape="false"
                                                  />
                                </p>
                            </li>

                            <li>
                                <div class="schedule-header">
                                    <h6>Character score</h6>

                                </div>

                                <p style="opacity: 0.7">
                                    <h:outputText value="This represents a business&apos; credit history which may be required to personally 
                                                  guarantee the loan. Statistics show that the way a person managed previous credit generally 
                                                  indicates how he or she will manage the curret business credit. Any references or other background 
                                                  information you can provide will be considered. "
                                                  escape="false"
                                                  />
                                </p>
                            </li>

                        </ul>

                    </div>
                </p:outputPanel>

            </p:outputPanel>

            <p:outputPanel  rendered="#{componentRenderer.loanProvider and not componentRenderer.administrator}" styleClass="p-grid">
                <div class="p-col-5">
                    <div class="card overview-box darkgray">
                        <div class="overview-info">
                            <h6>Total loans</h6>
                            <h1>#{dashboard.totalLoans}</h1>
                        </div>
                        <i class="pi pi-th-large"></i>
                    </div>
                </div>
                <div class="p-col-5">
                    <div class="card overview-box orange">
                        <div class="overview-info">
                            <h6>Total applications</h6>
                            <h1>#{dashboard.totalLoanApplications}</h1>
                        </div>
                        <i class="pi pi-cloud"></i>
                    </div>
                </div>

                <p:outputPanel  rendered="true"  styleClass="p-col-12 p-md-8">
                    <div class="card schedule">
                        <div class="card-header">
                            <div class="card-title">
                                <h6>Credit profile interpretations</h6>
                                <p class="subtitle">(All scores are given in percentages)</p>
                            </div>

                        </div>

                        <ul>
                            <li>
                                <div class="schedule-header">
                                    <h6>Capacity score</h6>

                                </div>

                                <p style="opacity: 0.7">
                                    <h:outputText value="
                                                  This represents a businesses&apos; ability to repay the loans. 
                                                  Its calculated from the revenue, expenses, cash flow and repayment timing."
                                                  escape="false"
                                                  /> 
                                </p>
                            </li>
                            <li>
                                <div class="schedule-header">
                                    <h6>Capital score</h6>

                                </div>

                                <p style="opacity: 0.7">
                                    <h:outputText value="The cash you put toward starting your business is called capital, and it&apos;s a 
                                                  good way to shows how serious a business is about its success. 
                                                  It&apos;s gotten from how much a business is trying to contribute towards the cause of the loan needed and the type of reason for loan application. 
                                                  This may come from deposits or money from other sources."
                                                  escape="false"
                                                  />
                                </p>
                            </li>

                            <li>
                                <div class="schedule-header">
                                    <h6>Collateral score</h6>

                                </div>

                                <p style="opacity: 0.7">
                                    <h:outputText value="Collateral is secondary source of repayment for the loan. This could be equipment, vehicles or 
                                                  inventory. The collatearl score will be based 
                                                  on a percentage of the collateral&apos;s value, which is called the loan-to-value ratio (LTV)."
                                                  escape="false"
                                                  />
                                </p>
                            </li>

                            <li>
                                <div class="schedule-header">
                                    <h6>Conditions</h6>

                                </div>

                                <p style="opacity: 0.7">
                                    <h:outputText value="This represents the legitmacy and competitiveness of the business, the type of industry, online presencs, 
                                                  profitability of the business as per current economical and political environment, and duration of existance of the business."
                                                  escape="false"
                                                  />
                                </p>
                            </li>

                            <li>
                                <div class="schedule-header">
                                    <h6>Character score</h6>

                                </div>

                                <p style="opacity: 0.7">
                                    <h:outputText value="This represents a business&apos; credit history which may be required to personally 
                                                  guarantee the loan. Statistics show that the way a person managed previous credit generally 
                                                  indicates how he or she will manage the curret business credit. Any references or other background 
                                                  information you can provide will be considered. "
                                                  escape="false"
                                                  />
                                </p>
                            </li>

                        </ul>

                    </div>
                </p:outputPanel>
            </p:outputPanel>
        </div>
    </ui:define>
</ui:composition>
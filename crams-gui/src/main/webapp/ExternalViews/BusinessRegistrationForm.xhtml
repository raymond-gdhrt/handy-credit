<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      lang="en">

    <h:head>
        <f:facet name="first">
            <meta http-equiv="X-UA-Compatible" content="IE=edge" />
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
            <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
            <meta name="apple-mobile-web-app-capable" content="yes" />
            <link rel="icon" href="#{request.contextPath}/resources/freya-layout/images/logo.png" type="image/x-icon"></link>
        </f:facet>
        <title><ui:insert name="title">CRAMS</ui:insert></title>
        <link rel="shortcut icon" type="image/x-icon"
              href="#{request.contextPath}/resources/images/favicon_ico.png" />
        <h:outputScript name="js/layout.js" library="freya-layout" />
        <h:outputStylesheet name="css/primeicons.css" library="freya-layout" />
        <h:outputStylesheet name="css/primeflex.min.css" library="freya-layout" />
        <h:outputStylesheet name="css/#{guestPreferences.layout}.css" library="freya-layout" />
        <h:outputStylesheet name="css/demo-#{guestPreferences.darkMode}.css" library="demo" />
        <ui:insert name="head"/>
    </h:head>

    <h:body styleClass="#{guestPreferences.inputStyleClass}" >

        <div class="ui-g-12  layout-wrapper layout-topbar-#{guestPreferences.topbarTheme} layout-menu-#{guestPreferences.menuTheme} #{guestPreferences.menuMode}" >
            <div class="ui-g-4 card-body" style="text-align: center">
                <h2>Register as SME</h2>
                <h:link  styleClass="logo">
                    <p:graphicImage name="images/logo.png" width="200" height="200" library="freya-layout" />
                </h:link>
                <p style="padding: 10%;font-size: 18px;color: #35557e">Nullam non efficitur tellus. Aenean sapien magna, vulputate dictum odio quis, 
                    ornare maximus elit. Vestibulum quis dolor eget sem lacinia consectetur. 
                    Integer ac accumsan enim. Cras eget nunc non ipsum dignissim blandit. 
                    Donec ex eros, lobortis eu nisi dictum, semper pulvinar ante.  </p>
                <p style="margin-top: 2px" >
                    <a href="LoanProviderRegistrationForm.xhtml">Register as loan provider instead </a>
                </p>
            </div>   
            <div class="ui-g-8">
                <h:form id="businessRegistrationForm"  enctype="multipart/form-data">

                    <ui:fragment >
                        <div class="card " >

                            <p:fieldset rendered="#{businessRegistrationForm.showForm}" legend="SME business details" id="regForm" >
                                <div class="ui-fluid p-formgrid p-grid">
                                    <p:outputPanel styleClass="p-field p-col-12 p-md-12" rendered="#{not businessRegistrationForm.successResponse}" 
                                                   style="background-color:red;margin-right: 20%;margin-left: 20%">
                                        <h4>#{businessRegistrationForm.customUiMessage} </h4>
                                    </p:outputPanel>
                                    <div class="p-field p-col-12 p-md-6">
                                        <p:outputLabel for="name" value="Company name" />
                                        <p:inputText required="true" id="name"
                                                     value="#{businessRegistrationForm.model.name}"/>
                                    </div>

                                    <div class="p-field p-col-12 p-md-6">
                                        <p:outputLabel for="type" value="Type" />
                                        <p:selectOneMenu id="type" required="true" value="#{businessRegistrationForm.model.type}">
                                            <f:selectItem itemLabel="Select One" itemValue=""/>
                                            <f:selectItems value="#{businessRegistrationForm.businessTypes}"/>
                                        </p:selectOneMenu>
                                    </div>

                                    <div class="p-field p-col-12 p-md-6">
                                        <p:outputLabel for="tin" value="Registartion /TIN number" />
                                        <p:inputText required="true" id="tin"
                                                     value="#{businessRegistrationForm.model.registrationNumber}"/>
                                    </div>

                                    <div class="p-field p-col-12 p-md-6">
                                        <p:outputLabel for="date" value="Opening date" />
                                        <p:calendar required="true" id="date"
                                                    value="#{businessRegistrationForm.model.dateOfOpening}"/>
                                    </div>


                                    <div class="p-field p-col-12 p-md-6">
                                        <p:outputLabel for="email" value="Email address" />
                                        <p:inputText required="true" id="email"
                                                     value="#{businessRegistrationForm.model.emailAddress}"/>
                                    </div>

                                    <div class="p-field p-col-12 p-md-6">
                                        <p:outputLabel for="phone" value="Phone number" />
                                        <p:inputText required="true" id="phone"
                                                     value="#{businessRegistrationForm.model.phoneNumber}"/>
                                    </div>

                                    <div class="p-field p-col-12 p-md-6">
                                        <p:outputLabel for="district" value="District" />
                                        <p:selectOneMenu  value="#{businessRegistrationForm.model.district}" 
                                                          id="district" 
                                                          effect="fade" filter="true" >

                                            <f:selectItems value="#{businessRegistrationForm.districts}"  />

                                        </p:selectOneMenu>

                                    </div>

                                    <div class="p-field p-col-12 p-md-6">
                                        <p:outputLabel for="size" value="Size" />
                                        <p:selectOneMenu  value="#{businessRegistrationForm.model.size}" 
                                                          id="size" 
                                                          effect="fade" filter="true" >

                                            <f:selectItems var="size" itemLabel="#{size.uiName}" value="#{businessRegistrationForm.companySizes}"  />

                                        </p:selectOneMenu>

                                    </div>
                                    <div class="p-field p-col-12 p-md-6">
                                        <p:outputLabel for="addr" value="Physical address" />
                                        <p:inputText required="true" id="addr"
                                                     value="#{businessRegistrationForm.model.physicalAddress}"/>
                                    </div>



                                </div>

                                <div class="ui-g-12 ui-md-12 ui-lg-12" >
                                    <div style="text-align: end; display: flex">

                                        <p:commandButton  value="Submit" id="saveBtn1"
                                                          process="regForm"
                                                          styleClass="green-btn" validateClient="true"
                                                          style="margin-left: auto"
                                                          action="#{businessRegistrationForm.createMember()}"
                                                          update="businessRegistrationForm" />

                                    </div>


                                </div>
                            </p:fieldset>


                            <p:fieldset id="codeSection" rendered="#{businessRegistrationForm.showCodeSection}">
                                <div class="ui-fluid p-formgrid p-grid" style="padding: 20%">
                                    <p:outputPanel styleClass="p-field p-col-12 p-md-12" rendered="#{not businessRegistrationForm.successResponse}" 
                                                   style="background-color:red;margin-right: 20%;margin-left: 20%">
                                        <h4>#{businessRegistrationForm.customUiMessage} </h4>
                                    </p:outputPanel>
                                    <div class="p-field p-col-12 p-md-12" style="text-align: center">
                                        <h4 >Enter code sent to your email</h4>
                                    </div>

                                    <p:outputPanel rendered="#{not businessRegistrationForm.successResponse}" 
                                                   style="background-color:red;color: white" styleClass="p-field p-col-12 p-md-12">
                                        <h5>#{businessRegistrationForm.customUiMessage}</h5>


                                    </p:outputPanel>
                                    <div class="p-field p-col-12 p-md-12">

                                        <p:inputText required="true" 
                                                     value="#{businessRegistrationForm.verificationCode}" />

                                    </div>
                                    <div class="p-field p-col-12 p-md-6" style="display: flex">

                                        <p:commandButton  style="margin-left: auto"
                                                          process="codeSection"
                                                          value="Verify" id="saveBtn2"
                                                          styleClass="green-btn" validateClient="true"
                                                          action="#{businessRegistrationForm.verifyCode()}"
                                                          update="codeSection" />
                                    </div>




                                </div>

                            </p:fieldset>



                            <p:fieldset id="postMessageSection" rendered="#{businessRegistrationForm.showFinalSection}">
                                <div class="card card-w-title" style="width: 100%;height: 100%">
                                    <div class="ui-g-12 ui-md-12 ui-lg-12" style="margin-bottom:20px;color:blue;font-size: 25px">
                                        <h4>#{businessRegistrationForm.customUiMessage}</h4>

                                        <h:link outcome="/pages/dashboard/Dashboard" styleClass="link_404" >
                                            Proceed to login
                                        </h:link>


                                    </div>
                                </div>
                            </p:fieldset>



                        </div>
                    </ui:fragment>

                    <p:blockUI block="businessRegistrationForm" trigger="saveBtn1 saveBtn2 ">
                        <p:graphicImage value="/resources/images/workingicon.png" />
                    </p:blockUI>
                </h:form>

            </div>

        </div>
    </h:body>

</html>